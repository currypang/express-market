# express-market

## 1. 프로젝트의 목표

* Express.js를 기반으로 상품 데이터에 대한 CRUD기능이 포함된 백엔드 서버 구축
* MongoDB를 이용해 DB를 구축하고, AWS를 통해 프로젝트를 배포한다.

## 2. API
<details>
<summary>Click</summary>  
  
</details>

## 3-1. 필수 구현 사항
<details>
<summary>Click</summary>  

### 프로젝트 기본 세팅

- [x] `README.md` 파일을 생성하여 간략한 프로젝트의 설명 및 실행 방법을 작성합니다.
- [x] `.env` 파일을 이용해서 민감한 정보(DB 계정 정보 등)를 관리합니다.
- [x] `.gitignore` 파일을 생성하여 `.env` ,`node_modules` 등
불필요하거나 민감한 정보가 Github에 올라가지 않도록 설정합니다.
- [x] `.prettierrc` 파일을 생성하여 일정한 코드 형태를 유지할 수 있도록 설정합니다.
- [x] `package.json` 파일의 `scripts` 항목에 `dev` 라는 이름을 추가하여 nodemon을 이용해서 서버를 실행할 수 있도록 합니다.

### API

1. 상품 생성 API

- [x] 상품명, 상품 설명, 담당자, 비밀번호를 Request body(`req.body`)로 전달 받습니다.
는 전달 받지 않고, 자동으로 생성합니다.
- [x] 상품은 두 가지 상태, 판매 중(`FOR_SALE`)및 판매 완료(`SOLD_OUT`) 를 가질 수 있습니다.
- [x] 상품 등록 시 기본 상태는 판매 중(`FOR_SALE`) 입니다.
- [x] 생성 일시, 수정 일시를 자동으로 생성합니다.

2. 상품 목록 조회 API

- [x] 상품 ID, 상품명, 상품 설명, 담당자, 상품 상태, 생성 일시, 수정 일시 를 조회합니다.
- [x] 비밀번호를 포함하면 안됩니다.
- [x] 상품 목록은 생성 일시를 기준으로 내림차순(최신순) 정렬합니다.

3. 상품 상세 조회 API

- [x] 상품 ID를 Path Parameter(`req.params`)로 전달 받습니다.
- [x] 상품 ID, 상품명, 상품 설명, 담당자, 상품 상태, 생성 일시, 수정 일시 를 조회합니다.
- [x] 비밀번호를 포함하면 안됩니다.

4. 상품 수정 API

- [x] 상품 ID**를 **Path Parameter(`req.params`)로 전달 받습니다.
- [x] 상품명, 상품 설명, 담당자, 상품 상태, 비밀번호를 Request body(`req.body`)로 전달 받습니다.
- [x] 수정할 상품과 비밀번호 일치 여부를 확인한 후, 동일할 때만 상품이 수정되어야 합니다. 일치하지 않을 경우, “비밀번호가 일치하지 않습니다.”메세지를 반환합니다.

5. 상품 삭제 API

- [x] 상품 ID를 Path Parameter(`req.params`)로 전달 받습니다.
- [x] 비밀번호를 Request body(`req.body`)로 전달 받습니다.
- [x] 삭제할 상품과 비밀번호 일치 여부를 확인한 후, 동일할 때만 글이 삭제되어야 합니다. 일치하지 않을 경우, “비밀번호가 일치하지 않습니다.”메세지를 반환합니다.

### 테스트:
- [x] API Client를 이용하여 구현 한 모든 API가 정상 동작하는지 확인합니다.

### 배포
- [x] 1. AWS EC2 인스턴스에 프로젝트를 배포합니다.
- [x] 2. PM2를 이용해 터미널을 종료하더라도 서버가 실행될 수 있도록 설정합니다.
- [x] 3. Gabia 또는 AWS Route 53을 이용해 도메인 주소를 연결한다면 더욱 좋습니다!
- [x] 4. 배포된 IP 주소 또는 연결된 도메인 주소를 제출해주세요!
</details>

## 3-2. 선택 구현 : 유효성 검사 및 에러처리

<details>
<summary>Click</summary>  

1. 에러 처리 (에러 처리 미들웨어)

- [x] 상품 상세 조회, 수정, 삭제 시 상품이 없는 경우에는 “상품이 존재하지 않습니다.” 메세지를 반환합니다. 상품 목록 조회 시 상품이 없는 경우에는 빈 배열(`[]`)을 반환합니다.
- [x] 상품 생성 시 입력 받은 상품명이 기존에 등록 된 상품명과 동일한 경우에는 “이미 등록 된 상품입니다.” 메세지를 반환합니다.
- [X] 그 밖의 에러가 발생했을 때에는 “예상치 못한 에러가 발생했습니다. 관리자에게 문의해 주세요.” 메세지를 반환합니다.

2. 유효성 검증 (Joi)

- [x] 상품 생성 시 정보가 빠진 경우, “OOO을(를) 입력해 주세요.” 메시지를 반환합니다.
- [x] 상품 수정, 삭제 시 비밀번호가 없는 경우, “비밀번호를 입력해 주세요.” 메세지를 반환합니다.
- [x] 상품 수정 시 상품 상태에 `FOR_SALE`, `SOLD_OUT` 이 외의 다른 값이 입력된 경우, “상품 상태는 [FOR_SALE,SOLD_OUT] 중 하나여야 합니다.”*메세지를 반환합니다.   

</details>

## 4. 기술 스택

<details>
<summary>Click</summary>

1. 웹 프레임워크: Express.js

2. 패키지 매니저: yarn   

3. 모듈 시스템: ESM   

4. 데이터베이스: MongoDb Atlas   

5. ODM: mongoose

6. 배포: AWS Ec2 


</details>

